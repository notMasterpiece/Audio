{"ast":null,"code":"var _jsxFileName = \"/Grawdanin/MERN/audio/src/components/PlayPanel/PlayPanelContainer.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { playNextAudio } from '../../modules/audio/audioAction';\nimport { normalizeAudioCurentTime } from \"../../helpers/helpers\";\nimport PlayPanel from './PlayPanel';\nconst defaultVolume = 60;\n\nclass PlayPanelContainer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handlePlay = () => {\n      const audio = this.state.audio;\n      audio.addEventListener(\"loadedmetadata\", this.getMetadata);\n\n      if (audio.paused || audio.ended) {\n        audio.play();\n        this.setState({\n          isPlaying: true\n        });\n      } else {\n        audio.pause();\n        this.setState({\n          isPlaying: false\n        });\n      }\n    };\n\n    this.getMetadata = () => {\n      const audio = this.state.audio;\n      const duration = Math.floor(audio.duration); // setCurrentTrackDuration(normalizeAudioCurentTime(duration));\n    };\n\n    this.handlePlayNext = () => {\n      const audio = this.state.audio;\n      this.props.playNextAudio();\n      audio.src = this.props.audioList[this.props.currentAudio].url;\n      audio.play();\n      this.setState({\n        isPlaying: true\n      });\n    };\n\n    this.changeVolume = value => {\n      const audio = this.state.audio;\n      this.setState({\n        volume: value\n      });\n      audio.volume = value / 100;\n    };\n\n    this.setCurrentAudioPlay = () => {};\n\n    this.state = {\n      audio: new Audio(props.audioList[props.currentAudio].url),\n      isPlaying: false,\n      volume: defaultVolume\n    };\n  }\n\n  // componentWillReceiveProps(nextProps, nextContext) {\n  //     this.setNewCurrentAudio(nextProps.currentAudio);\n  // }\n  componentDidMount() {// this.state.audio.play();\n    // this.state.audio.ondurationchange = e => {\n    //     console.log(this.state.audio.duration);\n    // }\n  }\n\n  render() {\n    const _this$state = this.state,\n          audio = _this$state.audio,\n          isPlaying = _this$state.isPlaying,\n          volume = _this$state.volume;\n    return React.createElement(PlayPanel, {\n      currentAudioObj: this.props.audioList[this.props.currentAudio],\n      audio: audio,\n      isPlaying: isPlaying,\n      handlePlay: this.handlePlay,\n      handlePlayNext: this.handlePlayNext,\n      volume: volume,\n      changeVolume: this.changeVolume // loop={loop}\n      // audioPlayer={audioPlayer}\n      // handleMetadata={handleMetadata}\n      // handleTimeupdate={handleTimeupdate}\n      // defaultValue={defaultValue}\n      // handleAudioLoop={handleAudioLoop}\n      // setAudioDuration={setAudioDuration}\n      // currentTrackMoment={currentTrackMoment}\n      // currentTrackDuration={currentTrackDuration}\n      // currentAudio={currentAudio}\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    });\n  }\n\n}\n\nPlayPanelContainer.propTypes = {\n  audioList: PropTypes.array,\n  currentAudio: PropTypes.number,\n  playNextAudio: PropTypes.func\n};\nexport default connect(state => ({\n  audioList: state.audio.audioList,\n  currentAudio: state.audio.currentAudio\n}), {\n  playNextAudio\n})(PlayPanelContainer); // import React, {useEffect, useState} from 'react';\n// import PropTypes from 'prop-types';\n// import PlayPanel from './PlayPanel';\n//\n// import {connect} from 'react-redux';\n//\n// const PlayPanelContainer = ({audioList, currentAudio}) => {\n//\n//\n//     const [audioPlayer, setAudioPlayer] = useState(null);\n//\n//     const [isPlaying, setIsPlaying] = useState(false);\n//     const [loop, setLoop] = useState(false);\n//     const [volume, setVolume] = useState(defaultValue);\n//     const [progressBarWidth, setProgressBarWidth] = useState('0');\n//     const [currentTrackDuration, setCurrentTrackDuration] = useState(0);\n//     const [currentTrackMoment, setCurrentTrackMoment] = useState(0);\n//\n//\n//     const handleAudioLoop = () => {\n//         setLoop(!loop);\n//     };\n//\n//     const handleMetadata = () => {\n//         const audio = audioPlayer.current;\n//\n//         const duration = Math.floor(audio.duration);\n//         setCurrentTrackDuration(normalizeAudioCurentTime(duration));\n//     };\n//\n//\n//     const setAudioDuration = diration => {\n//         audioPlayer.current.currentTime = diration;\n//     };\n//\n//\n//     const handleTimeupdate = () => {\n//         setCurrentTrackMoment(Math.floor(audioPlayer.current.currentTime));\n//         setProgressBarWidth(\n//             (audioPlayer.current.currentTime / audioPlayer.current.duration) * 100 + '%'\n//         );\n//         if (audioPlayer.current.currentTime === audioPlayer.current.duration) {\n//             alert('end');\n//         }\n//     };\n//\n//\n//\n//     return (\n//         <PlayPanel\n//             audioList={audioList}\n//             loop={loop}\n//             audioPlayer={audioPlayer}\n//             handleMetadata={handleMetadata}\n//             handleTimeupdate={handleTimeupdate}\n//             isPlaying={isPlaying}\n//             handlePlay={handlePlay}\n//             volume={volume}\n//             defaultValue={defaultValue}\n//             changeVolume={changeVolume}\n//             handleAudioLoop={handleAudioLoop}\n//             setAudioDuration={setAudioDuration}\n//             currentTrackMoment={currentTrackMoment}\n//             currentTrackDuration={currentTrackDuration}\n//             currentAudio={currentAudio}\n//         />\n//     );\n//\n// };\n//\n// PlayPanelContainer.propTypes = {\n//\n// };\n//\n// export default connect(state => ({\n//     audioList: state.audio.audioList,\n//     currentAudio: state.audio.currentAudio\n// }))(PlayPanelContainer);","map":{"version":3,"sources":["/Grawdanin/MERN/audio/src/components/PlayPanel/PlayPanelContainer.js"],"names":["React","Component","PropTypes","connect","playNextAudio","normalizeAudioCurentTime","PlayPanel","defaultVolume","PlayPanelContainer","constructor","props","handlePlay","audio","state","addEventListener","getMetadata","paused","ended","play","setState","isPlaying","pause","duration","Math","floor","handlePlayNext","src","audioList","currentAudio","url","changeVolume","value","volume","setCurrentAudioPlay","Audio","componentDidMount","render","propTypes","array","number","func"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\n\nimport {connect} from 'react-redux';\nimport {playNextAudio} from '../../modules/audio/audioAction';\n\nimport {normalizeAudioCurentTime} from \"../../helpers/helpers\";\n\nimport PlayPanel from './PlayPanel';\n\nconst defaultVolume = 60;\n\nclass PlayPanelContainer extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            audio: new Audio(props.audioList[props.currentAudio].url),\n            isPlaying: false,\n            volume: defaultVolume\n        };\n    }\n\n\n    handlePlay = () => {\n        const {audio} = this.state;\n\n        audio.addEventListener(\"loadedmetadata\", this.getMetadata);\n\n        if (audio.paused || audio.ended) {\n            audio.play();\n            this.setState({ isPlaying: true });\n        } else {\n            audio.pause();\n            this.setState({ isPlaying: false });\n        }\n    };\n\n\n    getMetadata = () => {\n        const {audio} = this.state;\n        const duration = Math.floor(audio.duration);\n        \n        // setCurrentTrackDuration(normalizeAudioCurentTime(duration));\n    };\n\n\n    handlePlayNext = () => {\n        const {audio} = this.state;\n\n        this.props.playNextAudio();\n\n        audio.src = this.props.audioList[this.props.currentAudio].url;\n        audio.play();\n        this.setState({ isPlaying: true });\n    };\n\n\n    changeVolume = value => {\n        const {audio} = this.state;\n\n        this.setState({volume: value});\n        audio.volume = value / 100;\n    };\n\n\n    // componentWillReceiveProps(nextProps, nextContext) {\n    //     this.setNewCurrentAudio(nextProps.currentAudio);\n    // }\n\n\n    componentDidMount() {\n        // this.state.audio.play();\n\n\n        // this.state.audio.ondurationchange = e => {\n        //     console.log(this.state.audio.duration);\n        // }\n    }\n\n\n    setCurrentAudioPlay = () => {\n\n    };\n\n\n    render() {\n\n        const {audio, isPlaying, volume} = this.state;\n\n        return (\n            <PlayPanel\n                currentAudioObj={this.props.audioList[this.props.currentAudio]}\n                audio={audio}\n                isPlaying={isPlaying}\n                handlePlay={this.handlePlay}\n                handlePlayNext={this.handlePlayNext}\n                volume={volume}\n                changeVolume={this.changeVolume}\n                // loop={loop}\n                // audioPlayer={audioPlayer}\n                // handleMetadata={handleMetadata}\n                // handleTimeupdate={handleTimeupdate}\n\n                // defaultValue={defaultValue}\n\n                // handleAudioLoop={handleAudioLoop}\n                // setAudioDuration={setAudioDuration}\n                // currentTrackMoment={currentTrackMoment}\n                // currentTrackDuration={currentTrackDuration}\n                // currentAudio={currentAudio}\n            />\n        );\n    }\n}\n\nPlayPanelContainer.propTypes = {\n    audioList: PropTypes.array,\n    currentAudio: PropTypes.number,\n    playNextAudio: PropTypes.func,\n};\n\nexport default connect(state => ({\n    audioList: state.audio.audioList,\n    currentAudio: state.audio.currentAudio\n}), {playNextAudio})(PlayPanelContainer);\n\n\n\n\n\n\n// import React, {useEffect, useState} from 'react';\n// import PropTypes from 'prop-types';\n// import PlayPanel from './PlayPanel';\n//\n// import {connect} from 'react-redux';\n\n//\n// const PlayPanelContainer = ({audioList, currentAudio}) => {\n//\n//\n//     const [audioPlayer, setAudioPlayer] = useState(null);\n//\n//     const [isPlaying, setIsPlaying] = useState(false);\n//     const [loop, setLoop] = useState(false);\n//     const [volume, setVolume] = useState(defaultValue);\n//     const [progressBarWidth, setProgressBarWidth] = useState('0');\n//     const [currentTrackDuration, setCurrentTrackDuration] = useState(0);\n//     const [currentTrackMoment, setCurrentTrackMoment] = useState(0);\n//\n//\n//     const handleAudioLoop = () => {\n//         setLoop(!loop);\n//     };\n//\n//     const handleMetadata = () => {\n//         const audio = audioPlayer.current;\n//\n//         const duration = Math.floor(audio.duration);\n//         setCurrentTrackDuration(normalizeAudioCurentTime(duration));\n//     };\n//\n//\n//     const setAudioDuration = diration => {\n//         audioPlayer.current.currentTime = diration;\n//     };\n//\n//\n//     const handleTimeupdate = () => {\n//         setCurrentTrackMoment(Math.floor(audioPlayer.current.currentTime));\n//         setProgressBarWidth(\n//             (audioPlayer.current.currentTime / audioPlayer.current.duration) * 100 + '%'\n//         );\n//         if (audioPlayer.current.currentTime === audioPlayer.current.duration) {\n//             alert('end');\n//         }\n//     };\n//\n//\n//\n//     return (\n//         <PlayPanel\n//             audioList={audioList}\n//             loop={loop}\n//             audioPlayer={audioPlayer}\n//             handleMetadata={handleMetadata}\n//             handleTimeupdate={handleTimeupdate}\n//             isPlaying={isPlaying}\n//             handlePlay={handlePlay}\n//             volume={volume}\n//             defaultValue={defaultValue}\n//             changeVolume={changeVolume}\n//             handleAudioLoop={handleAudioLoop}\n//             setAudioDuration={setAudioDuration}\n//             currentTrackMoment={currentTrackMoment}\n//             currentTrackDuration={currentTrackDuration}\n//             currentAudio={currentAudio}\n//         />\n//     );\n//\n// };\n//\n// PlayPanelContainer.propTypes = {\n//\n// };\n//\n// export default connect(state => ({\n//     audioList: state.audio.audioList,\n//     currentAudio: state.audio.currentAudio\n// }))(PlayPanelContainer);"]},"metadata":{},"sourceType":"module"}