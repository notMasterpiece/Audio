"use strict";

exports.__esModule = true;
exports.default = createAsyncActions;

var _createAction = _interopRequireDefault(require("./createAction"));

var _isUndefined = _interopRequireDefault(require("./utils/isUndefined"));

var _isPlainObject = _interopRequireDefault(require("./utils/isPlainObject"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var asyncActionTypes = ['start', 'success', 'error'];

function createAsyncActions(actionType, actionOptions) {
  if (actionType.includes('/')) {
    var actionIndex = actionType.lastIndexOf('/') + 1;
    var moduleName = actionType.substring(0, actionIndex);
    var actionName = actionType.substring(actionIndex, actionType.length);
    actionType = [moduleName, actionName.toUpperCase()].join('');
  }

  var action = (0, _createAction.default)(actionType);
  asyncActionTypes.forEach(function (type) {
    var asyncType = [actionType, type.toUpperCase()].join('_');
    var actionTypeLower = type.toLowerCase();
    var payloadCreator;
    var metaCreator;

    if (!(0, _isUndefined.default)(actionOptions) && (0, _isPlainObject.default)(actionOptions) && (0, _isPlainObject.default)(actionOptions[type])) {
      var options = actionOptions[type];
      payloadCreator = options.payloadCreator;
      metaCreator = options.metaCreator;
    }

    action[actionTypeLower] = (0, _createAction.default)(asyncType, payloadCreator, metaCreator);
  });
  return action;
}

createAsyncActions.asyncActionTypes = asyncActionTypes;

createAsyncActions.setTypes = function (_ref) {
  var start = _ref.start,
      success = _ref.success,
      error = _ref.error;
  asyncActionTypes = [start, success, error];
  createAsyncActions.asyncActionTypes = asyncActionTypes;
};